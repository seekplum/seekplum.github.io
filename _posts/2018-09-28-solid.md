---
layout: post
title: SOLID原则
categories: python
tags: python SOLID
thread: python
---
## 前言
在之前的编码中，更多的是注重的是代码规范等方面，自以为代码风格方面还是不错的。在开始对自己的代码进行单元测试之后才知道，即使代码风格看着还不错，注释很齐全，但要进行测试还是比较有难度，会导致很难设计测试用例和执行，往往一个类方法测试需要3、4次mock，导致单元测试代码就难以维护。更别说业务代码进行扩展迭代。

## 目标
写完本篇后希望达到以下几点目标

* [ ] 1.对代码范式可以熟记于胸，在日后编码时可以避免大量设计错误
* [ ] 2.整理几个简单的标准或约定，提高代码质量
* [ ] 3.梳理代码质量判断准则，可以简单、有效判断自己代码质量

## 代码终极目标
* 1.实现需求
* 2.提高代码质量和可维护性(包括可读性、可扩展性)

## 基本概念
SOLID 是Michael Feathers推荐的便于记忆的首字母简写，它代表了Robert Martin命名的最重要的五个面对对象编码设计原则：

* S: 单一职责原则 Single Responsibility Principle (SRP)
* O: 开发封闭原则 Open/Closed Principle (OCP)
* L: 里氏替换原则 Liskov Substitution Principle (LSP)
* I: 接口隔离原则 Interface Segregation Principle (ISP)
* D: 依赖反转原则 Dependency Inversion Principle (DIP)

## 名词介绍
* OOD: 面向对象设计
* DIP: 依赖反转(也叫依赖倒置)，`软件设计原则`
* IOC: 控制反转，`软件设计模式`
* DI: 依赖注入
* IOC Container: 控制反转容器，也是依赖注入容器，用来映射依赖，管理对象创建和生存周期

## 单一职责原则(SRP)
一个对象只为一个元素负责

## 开放封闭原则(OCP)
对扩展开放，修改关闭

## 里氏替换原则(LSP)
可以使用任何派生类替换基类

## 接口隔离原则(ISP)
对于接口进行分类，避免一个接口的方法过多

## 依赖倒置原则(DIP)
转换了依赖，高层模块不依赖低层模块的实现，而低层模块依赖于高层模块定义的接口。**高层模块定义接口，低层模块负责实现。**

> 高层模块不应依赖于低层模块，两者应该依赖于抽象

> 抽象不应该依赖于实现，实现依赖于抽象

### 场景
只要有一张银行卡(当然这卡得有钱，还得知道密码)，随便到哪一家银行的ATM都能取钱。ATM相当于高层模块，银行卡相当于低层模块。ATM定义了一个插口(接口)，所有的银行卡都可以插入使用。即ATM机不关心具体哪个银行的卡。ATM机定义好银行卡的规格参数(接口)，所有实现了这种规格参数的银行卡都能在ATM上取钱。

### 优点
* **系统更柔韧**: 可以修改一部分代码而不影响其他模块 
* **系统更健壮**: 可以修改一部分代码而不会让系统崩溃
* **系统更搞笑**: 组件松耦合，且可复用，提高开发效率 


## 依赖注入(DI)
使用钩子再原来执行流程中注入其他对象

通过元类的 `__call__` 方法可以拦截类实例的创建。

## 控制反转原则(IOC)

## 约定
* 1.`接口类` 以大写 `I` 开头进行标识
* 2.`抽象类` 以大写 `A` 开头进行标识

## 参考
* [抽象类、抽象方法、接口、依赖注入、SOLIP](https://www.cnblogs.com/pythonxiaohu/p/5847505.html)
* [深入理解DIP、IoC、DI以及IoC容器](http://www.cnblogs.com/liuhaorain/p/3747470.html#title_2)
* [OOD、DIP、IOC、DI、依赖注入容器（即 控制反转容器，IOC Container）](https://segmentfault.com/a/1190000010978964)
* [控制反转IOC与依赖注入DI](https://my.oschina.net/1pei/blog/492601)
* [IOC/DIP其实是一种管理思想](https://coolshell.cn/articles/9949.html)
* [如何在Python里应用SOLID原则](http://aju.space/2016/06/17/use-S-O-L-I-D-in-python.html)


