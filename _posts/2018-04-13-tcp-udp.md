---
layout: post
title:  TCP/UDP
tags: tcp udp
thread: tcpudp
---
|特点|TCP|UDP|
|:---|:---|:---|
|连接性|面向连接|面向非连接|
|可靠性|可靠|不可靠|
|传输效率|慢|快|

## TCP
* 概念
> 是一种面向连接的、可靠的、基于字节流的传输层通信协议。是专门为了在不可靠的互联网络上提供一个可靠的端到端字节流而设计的，面向字节流。
> TCP 是通过重传、确认和校验和的方式来确保可靠

## UDP
### 概念
> （用户数据报协议）是iso参考模型中一种无连接的传输层协议，提供面向操作的简单不可靠的非连接传输层服务，面向报文。

### 三次握手
* 第一次握手：客户端发送一个tcp的syn标志位置为1的包（连接请求），指明客户打算连接服务器的端口；

* 第二次握手：当服务器收到连接请求之后，返回确认包（ack）应答，即将syn和ack标志位同时致为1（授予连接），并为这次连接分配资源；

* 第三次握手：客户端收到服务器的授予连接请求之后，再次发送确认包（ack）（syn标志位为0，ack标志位为1），并分配资源，这样tcp就建立连接了。

## 对比
* 1、tcp是基于连接的，可靠性高；udp是基于无连接的，可靠性较低；
* 2、由于tcp是连接的通信，需要有三次握手、重新确认等连接过程，会有延时，实时性差；同时过程复杂，也使其易于被攻击；而udp无连接，无建立连接的过程，因而实时性较强，也稍安全；
* 3、在传输相同大小的数据时，tcp首部开销20字节；udp首部开销只有8个字节，tcp报头比udp复杂，故实际包含的用户数据较少。tcp无丢包，而udp有丢包，故tcp开销大，udp开销较小；
* 4、每条tcp连接只能是点到点的；udp支持一对一、一对多、多对一、多对多的交互通信。

## 结论
* 如果对实时性要求高和高速传输的场合下需要使用udp；如果需要传输大量数据且对可靠性要求高的情况下应该使用tcp；在可靠性要求较低，追求效率的情况下应该使用udp。


